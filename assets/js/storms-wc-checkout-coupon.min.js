"use strict";jQuery(function(s){if("undefined"==typeof storms_wc_checkout_coupon_vars)return!1;function a(o){var e;(e=o).is(".processing")||e.parents(".processing").length||o.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function n(o){o.removeClass("processing").unblock()}function u(o,e){(e=e||(s(".woocommerce-notices-wrapper:first")||s(".cart-empty").closest(".woocommerce")||s(".woocommerce-cart-form"))).prepend(o)}function m(o,e){var c=s.parseHTML(o),t=s(".woocommerce-cart-form",c),r=s(".cart_totals",c),a=s(".woocommerce-error, .woocommerce-message, .woocommerce-info",c);if(0!==s(".woocommerce-cart-form").length){if(e||s(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),0===t.length){if(s(".woocommerce-checkout").length)return void window.location.reload();var n=s(".cart-empty",c).closest(".woocommerce");s(".woocommerce-cart-form__contents").closest(".woocommerce").replaceWith(n),0<a.length&&u(a),s(document.body).trigger("wc_cart_emptied")}else s(".woocommerce-checkout").length&&s(document.body).trigger("update_checkout"),s(".woocommerce-cart-form").replaceWith(t),s(".woocommerce-cart-form").find(':input[name="update_cart"]').prop("disabled",!0),0<a.length&&u(a),m=r,s(".cart_totals").replaceWith(m),s(document.body).trigger("updated_cart_totals");var m;s(document.body).trigger("updated_wc_div")}else window.location.reload()}var i=s(document.body).hasClass("woocommerce-cart"),l=s(document.body).hasClass("woocommerce-checkout");s(document.body).on("click","button[name='apply_coupon'], input[name='apply_coupon']",function(o){if(o.preventDefault(),i||l){var t="";t=l?s(this).parents(".woocommerce-checkout-review-order"):s(o.currentTarget).closest(".cart_totals");var e=s("#coupon_code"),c=e.val(),r={security:storms_wc_checkout_coupon_vars.apply_coupon_nonce,coupon_code:c};a(t),s.ajax({url:storms_wc_checkout_coupon_vars.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),type:"POST",data:r,dataType:"html",success:function(o){var e,c;s(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),n(t),u(o),l?s(document.body).trigger("update_checkout",{update_shipping_method:!1}):(e=!0,c=s(".woocommerce-cart-form"),a(c),a(s("div.cart_totals")),s.ajax({type:c.attr("method"),url:c.attr("action"),data:c.serialize(),dataType:"html",success:function(o){m(o,e)},complete:function(){n(c),n(s("div.cart_totals")),s.scroll_to_notices(s('[role="alert"]'))}}))},complete:function(){n(t),e.val("")},error:function(o){storms_wc_checkout_coupon_vars.debug_mode&&console.log(o.responseText)}})}})});
//# sourceMappingURL=maps/storms-wc-checkout-coupon.min.js.map
