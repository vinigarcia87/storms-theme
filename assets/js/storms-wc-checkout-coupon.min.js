"use strict";jQuery((function(o){if("undefined"==typeof storms_wc_checkout_coupon_vars)return!1;var e=o(document.body).hasClass("woocommerce-cart"),c=o(document.body).hasClass("woocommerce-checkout"),t=function(o){(function(o){return o.is(".processing")||o.parents(".processing").length})(o)||o.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},r=function(o){o.removeClass("processing").unblock()},a=function(e,c){c||(c=o(".woocommerce-notices-wrapper:first")||o(".cart-empty").closest(".woocommerce")||o(".woocommerce-cart-form")),c.prepend(e)},n=function(e,c){var t=o.parseHTML(e),r=o(".woocommerce-cart-form",t),n=o(".cart_totals",t),m=o(".woocommerce-error, .woocommerce-message, .woocommerce-info",t);if(0!==o(".woocommerce-cart-form").length){if(c||o(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),0===r.length){if(o(".woocommerce-checkout").length)return void window.location.reload();var s=o(".cart-empty",t).closest(".woocommerce");o(".woocommerce-cart-form__contents").closest(".woocommerce").replaceWith(s),m.length>0&&a(m),o(document.body).trigger("wc_cart_emptied")}else o(".woocommerce-checkout").length&&o(document.body).trigger("update_checkout"),o(".woocommerce-cart-form").replaceWith(r),o(".woocommerce-cart-form").find(':input[name="update_cart"]').prop("disabled",!0),m.length>0&&a(m),function(e){o(".cart_totals").replaceWith(e),o(document.body).trigger("updated_cart_totals")}(n);o(document.body).trigger("updated_wc_div")}else window.location.reload()};o(document.body).on("click","button[name='apply_coupon'], input[name='apply_coupon']",(function(m){if(m.preventDefault(),e||c){var s="";s=c?o(this).parents(".woocommerce-checkout-review-order"):o(m.currentTarget).closest(".cart_totals");var u=o("#coupon_code"),i=u.val(),l={security:storms_wc_checkout_coupon_vars.apply_coupon_nonce,coupon_code:i};t(s),o.ajax({url:storms_wc_checkout_coupon_vars.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),type:"POST",data:l,dataType:"html",success:function(e){var m,u;o(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),r(s),a(e),c?o(document.body).trigger("update_checkout",{update_shipping_method:!1}):(m=!0,u=o(".woocommerce-cart-form"),t(u),t(o("div.cart_totals")),o.ajax({type:u.attr("method"),url:u.attr("action"),data:u.serialize(),dataType:"html",success:function(o){n(o,m)},complete:function(){r(u),r(o("div.cart_totals")),o.scroll_to_notices(o('[role="alert"]'))}}))},complete:function(){r(s),u.val("")},error:function(o){storms_wc_checkout_coupon_vars.debug_mode&&console.log(o.responseText)}})}}))}));
//# sourceMappingURL=maps/storms-wc-checkout-coupon.min.js.map
