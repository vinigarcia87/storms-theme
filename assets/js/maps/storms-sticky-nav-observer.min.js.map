{"version":3,"sources":["storms-sticky-nav-observer.min.js"],"names":["window","sticky_el","document","querySelector","has_wp_adminbar","classList","contains","body","header_el","wrap_el","margin","offsetHeight","offsetTop","headerObserverOptions","headerObserver","IntersectionObserver","entries","forEach","entry","body_class_list","is_device_xs","is_device_sm","is_device_md","is_device_lg","add","remove","style","marginTop","isIntersecting","toString","setTimeout","observe"],"mappings":"AAAA,aAOA,GAAI,yBAA0BA,OAAQ,CACpC,IAAIC,UAAYC,SAASC,cAAc,mCAEvC,GAAIF,UAAW,CAEb,IAAIG,gBAAkBF,SAASC,cAAc,QAAQE,UAAUC,SAAS,aACpEC,KAAOL,SAASC,cAAc,QAC9BK,UAAYN,SAASC,cAAc,gBAEnCM,QAAUP,SAASC,cAAc,SAGjCO,OAAST,UAAUU,aACnBC,UAAYX,UAAUW,UACtBC,sBAAwB,GAExBC,eAAiB,IAAIC,qBAAqB,SAAUC,EAASF,GAC/DE,EAAQC,QAAQ,SAAUC,GAExB,IAAIC,EAAkBZ,KAAKF,UACvBe,EAAeD,EAAgBb,SAAS,gBACxCe,EAAeF,EAAgBb,SAAS,gBACxCgB,EAAeH,EAAgBb,SAAS,gBACxCiB,EAAeJ,EAAgBb,SAAS,gBACzBa,EAAgBb,SAAS,gBAK5C,GAAIc,GAAgBC,GAAgBC,GAAgBC,EAKlD,OAJAtB,UAAUI,UAAUmB,IAAI,mBACxBvB,UAAUI,UAAUoB,OAAO,aAC3BlB,KAAKF,UAAUoB,OAAO,uBACtBhB,QAAQiB,MAAMC,UAAY,KAKvBT,EAAMU,gBAUT3B,UAAUI,UAAUmB,IAAI,mBACxBvB,UAAUI,UAAUoB,OAAO,aAC3BlB,KAAKF,UAAUoB,OAAO,kBACtBhB,QAAQiB,MAAMC,UAAY,MAX1B1B,UAAUI,UAAUoB,OAAO,mBAC3BxB,UAAUI,UAAUmB,IAAI,aAExBjB,KAAKF,UAAUmB,IAAI,kBAEnBf,QAAQiB,MAAMC,UAAYjB,OAAOmB,WAAa,SASjDhB,uBACHiB,WAAW,WACThB,eAAeiB,QAAQvB,YACtB","file":"../storms-sticky-nav-observer.min.js","sourcesContent":["\"use strict\";\n\n/**\r\n * Observer to help stick the menu element to the top\r\n * @see https://stackoverflow.com/a/56678169/1003020\r\n * @see https://www.youtube.com/watch?v=RxnV9Xcw914\r\n */\nif ('IntersectionObserver' in window) {\n  var sticky_el = document.querySelector('[data-toggle=\"sticky-onscroll\"]'); // This is the menu we wanna stick\n\n  if (sticky_el) {\n    // Check if the WP adminbar is present\n    var has_wp_adminbar = document.querySelector('body').classList.contains('admin-bar');\n    var body = document.querySelector('body');\n    var header_el = document.querySelector('header > div'); // This is the element right on top of the menu we wanna stick\n\n    var wrap_el = document.querySelector('#wrap'); // This is the element right after the menu we wanna stick\n    // The height of the sticky menu\n\n    var margin = sticky_el.offsetHeight;\n    var offsetTop = sticky_el.offsetTop;\n    var headerObserverOptions = {//rootMargin: (has_wp_adminbar ? '-' + offsetTop + 'px' : '0px')\n    };\n    var headerObserver = new IntersectionObserver(function (entries, headerObserver) {\n      entries.forEach(function (entry) {\n        // Try to identify what size is the user's device\n        var body_class_list = body.classList;\n        var is_device_xs = body_class_list.contains('sts-media-xs');\n        var is_device_sm = body_class_list.contains('sts-media-sm');\n        var is_device_md = body_class_list.contains('sts-media-md');\n        var is_device_lg = body_class_list.contains('sts-media-lg');\n        var is_device_xl = body_class_list.contains('sts-media-xl'); // Maybe we couldn't identify the device's size\n\n        var is_device_unknown = !is_device_xs && !is_device_sm && !is_device_md && !is_device_lg && !is_device_xl; // Avoid this behaviour on specific media sizes\n        // TODO Make this filter customizable\n\n        if (is_device_xs || is_device_sm || is_device_md || is_device_lg) {\n          sticky_el.classList.add('position-static');\n          sticky_el.classList.remove('fixed-top');\n          body.classList.remove('has-fixed-menu');\n          wrap_el.style.marginTop = \"0\";\n          return;\n        } // When the element right on top the menu is out of the viewport, we stick the menu\n\n\n        if (!entry.isIntersecting) {\n          // Add classes to stick the menu\n          sticky_el.classList.remove('position-static');\n          sticky_el.classList.add('fixed-top'); // Add class to body, informing that we have a fixed element\n\n          body.classList.add('has-fixed-menu'); // Fix the position of the wrap element, so the screen don't \"jump\"\n\n          wrap_el.style.marginTop = margin.toString() + 'px';\n        } else {\n          // When the element right on top the menu is back, whe unstick the menu\n          sticky_el.classList.add('position-static');\n          sticky_el.classList.remove('fixed-top');\n          body.classList.remove('has-fixed-menu');\n          wrap_el.style.marginTop = '0';\n        }\n      });\n    }, headerObserverOptions);\n    setTimeout(function () {\n      headerObserver.observe(header_el);\n    }, 1000);\n  }\n}"]}